<div class="flex items-center justify-center" style="min-height: 80vh;">
  <div class="form-container">
    <h2 class="text-center mb-6">Connexion</h2>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Message d'erreur global -->
      <div *ngIf="error" class="alert alert--error" role="alert" aria-live="polite">
        <span class="alert__icon" aria-hidden="true">⚠️</span>
        {{error}}
      </div>

      <!-- Champ Email -->
      <div class="form-field">
        <label for="email" class="form-label form-label--required">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          [class.form-control--invalid]="submitted && f['email'].errors"
          [class.form-control--valid]="submitted && !f['email'].errors && f['email'].value"
          placeholder="Votre email"
          aria-describedby="email-error"
          [attr.aria-invalid]="submitted && f['email'].errors ? 'true' : 'false'" />

        <div *ngIf="submitted && f['email'].errors"
             class="validation-message validation-message--error"
             id="email-error"
             role="alert">
          <span aria-hidden="true">✕</span>
          <div *ngIf="f['email'].errors['required']">L'email est requis</div>
          <div *ngIf="f['email'].errors['email']">Veuillez saisir un email valide</div>
        </div>
      </div>

      <!-- Champ Mot de passe -->
      <div class="form-field">
        <label for="password" class="form-label form-label--required">Mot de passe</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          class="form-control"
          [class.form-control--invalid]="submitted && f['password'].errors"
          [class.form-control--valid]="submitted && !f['password'].errors && f['password'].value"
          placeholder="Votre mot de passe"
          aria-describedby="password-error"
          [attr.aria-invalid]="submitted && f['password'].errors ? 'true' : 'false'" />

        <div *ngIf="submitted && f['password'].errors"
             class="validation-message validation-message--error"
             id="password-error"
             role="alert">
          <span aria-hidden="true">✕</span>
          <div *ngIf="f['password'].errors['required']">Le mot de passe est requis</div>
          <div *ngIf="f['password'].errors['minlength']">Le mot de passe doit contenir au moins 6 caractères</div>
        </div>
      </div>

      <!-- Bouton de soumission -->
      <button
        type="submit"
        class="btn btn--primary btn--full"
        [disabled]="loading"
        [attr.aria-describedby]="loading ? 'loading-text' : null">
        <span *ngIf="loading" class="spinner" aria-hidden="true"></span>
        Se connecter
      </button>
      <div *ngIf="loading" id="loading-text" class="sr-only">Connexion en cours...</div>

      <!-- Lien vers inscription -->
      <div class="text-center mt-4">
        <p class="text-muted">
          Pas encore de compte ?
          <a routerLink="/register" class="text-primary">S'inscrire</a>
        </p>
      </div>
    </form>
  </div>
</div>
